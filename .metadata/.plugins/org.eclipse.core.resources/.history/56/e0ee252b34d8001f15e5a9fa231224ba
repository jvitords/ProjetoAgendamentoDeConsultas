package entities;

import java.time.LocalDateTime;
import java.util.List;

import service.ServicoDePagamento;
import service.ServicoDePagamentoComConvenio;
import service.ServicoDePagamentoSemConvenio;

public class Agenda {
	
	static List<Consulta> listaDeConsultas;
	
	public Agenda(List<Consulta> listaDeConsultas) {
		this.listaDeConsultas = listaDeConsultas;
	}

	public List<Consulta> getListaDeConsultas() {
		return listaDeConsultas;
	}

	public void setListaDeConsultas(List<Consulta> listaDeConsultas) {
		this.listaDeConsultas = listaDeConsultas;
	}

	public void mostrarConsultasAgendadas() {
		System.out.println("----- CONSULTAS AGENDADAS -----\n");
		for(Consulta consulta : listaDeConsultas) {
			System.out.println( consulta.getPaciente().getNome() + " - " + consulta.getProcedimento() + " - " + consulta.getData() + " - R$" + consulta.getValor());
		}
	}
	
	public void adicionarNovaConsulta() {
		Consulta consulta = new Consulta(new Paciente("João Vitor", 400381518), LocalDateTime.now(), 100.0, "Manutenção", Status.AGENDADO, TipoDoCliente.SEM_CONVENIO);
		TipoDoCliente tipo = consulta.getTipoDoCliente();
		listaDeConsultas.add(consulta);
		
		switch (tipo){
		case COM_CONVENIO: 
			ServicoDePagamento servicoDePagamento = new ServicoDePagamentoComConvenio(consulta);
			servicoDePagamento.calcularValorDaConsulta(consulta.getValor());
			break;
		case SEM_CONVENIO:
			ServicoDePagamento servicoDePagamento2 = new ServicoDePagamentoSemConvenio(consulta);
			servicoDePagamento2.calcularValorDaConsulta(consulta.getValor());
			break;
		default:
			System.out.println("FIM");
		}
	}
}
